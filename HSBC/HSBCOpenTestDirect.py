from selenium import webdriver
from selenium.webdriver.common.keys import Keys
from selenium.webdriver.support import expected_conditions as EC
from selenium.webdriver.support.ui import WebDriverWait
from selenium.webdriver.common.by import By
from selenium.common.exceptions import TimeoutException
import time
import myencoder

mypass=["c","g","L","B","h","T","H","R","p"]
delay=300 # seconds

browser = webdriver.Firefox()
#browser.find_element_by_css_selector("span.logon-span").click()
#browser.find_element_by_link_text("Personal Internet BankingOpens in a new Window.").click()

browser.get("https://www.ebanking.hsbc.com.hk/1/2/logon?LANGTAG=en&COUNTRYTAG=US")
try:
    myElem = WebDriverWait(browser, delay).until(EC.presence_of_element_located((By.NAME, 'u_UserID')))
    print("Page is ready!")
except TimeoutException:
    print("Loading took too much time!")
browser.find_element_by_name("u_UserID").clear()
browser.find_element_by_name("u_UserID").send_keys("chrisbren")
browser.find_element_by_css_selector("img[alt=\"Dual Password\"]").click()
try:
    myElem = WebDriverWait(browser, delay).until(EC.presence_of_element_located((By.ID, 'memorableAnswer')))
    browser.find_element_by_id("memorableAnswer").clear()
    browser.find_element_by_id("memorableAnswer").send_keys("pond34sde")
except TimeoutException:
    print("Loading took too much time!")
i=1
pass_base="pass"
mypass=myencoder.get_pass2("HSBC")
s
while(i < 9):
    passstring=pass_base+str(i)
    print(passstring)
    if (browser.find_element_by_id(passstring).is_enabled()):
        browser.find_element_by_id(passstring).send_keys(mypass[i])
        #print("Ele1editable")
    #else:
        #print("Ele1eNOTditable")
    i=i+1
browser.find_element_by_css_selector("input.submit_input").click()

account_saldo = driver.find_element_by_css_selector("#balanceField > span.privacy").text
